{% block panel_actions_widget -%}
    {%- set attr = attr|merge({'class': ('panel-actions ' ~ attr.class|default(''))|trim}) -%}

    <div{{ block('widget_container_attributes') }}>
        {{- value|raw -}}
        {%- for child in block -%}
            {{- block_widget(child) -}}
        {%- endfor -%}
        {%- if panel_button_collapse is defined -%}
            {{- block_widget(panel_button_collapse) -}}
        {%- endif -%}
    </div>
{%- endblock panel_actions_widget %}


{% block panel_buttons_widget -%}
    {%- set attr = attr|merge({'class': ('panel-buttons ' ~ attr.class|default(''))|trim}) -%}

    <div{{ block('widget_container_attributes') }}>
        {{- value|raw -}}
        {%- for child in block -%}
            {{- block_widget(child) -}}
        {%- endfor -%}
    </div>
{%- endblock panel_buttons_widget %}


{% block panel_section_widget -%}
    {%- if rendered and (not(hidden_if_empty) or (hidden_if_empty and block.children|length > 0)) -%}
        {%- set attr = attr|merge({'class': ('panel-section container-fluid ' ~ attr.class|default(''))|trim}) -%}

        {%- if collapsible -%}
            {%- set attr = attr|merge({'data-panel-collapse': 'true', 'data-collapse-selector': '> .panel-section-heading > .panel-actions > .btn-panel-collapse'}) -%}
        {%- endif -%}

        {%- if collapsed -%}
            {%- set attr = attr|merge({'class': (attr.class|default('') ~ ' panel-collapsed')|trim}) -%}
        {%- endif -%}

        <div{{ block('widget_container_attributes') }}>
            {%- if panel_section_heading is defined or panel_section_actions is defined -%}
                {%- set label_attr = label_attr|merge({'class': ('panel-section-heading ' ~ label_attr.class|default(''))|trim}) -%}

                <div{% for attrname, attrvalue in label_attr %} {{ attrname }}="{{ attrvalue }}"{% endfor %}>
                    {%- if panel_section_actions is defined -%}
                        {{- block_widget(panel_section_actions) -}}
                    {%- endif -%}

                    {%- if panel_section_heading is defined -%}
                        {{- block_widget(panel_section_heading) -}}
                    {%- endif -%}
                </div>
            {%- endif -%}

            {{- value|raw -}}

            {%- for child in block -%}
                {{- block_widget(child) -}}
            {%- endfor -%}
        </div>
    {%- endif -%}
{%- endblock panel_section_widget %}


{% block panel_row_widget -%}
    {%- if rendered -%}
        {%- set attr = attr|merge({'class': ('panel-row row ' ~ attr.class|default(''))|trim}) -%}

        <div{{ block('widget_container_attributes') }}>
            {{- value|raw -}}
            {%- for child in block -%}
                {{- block_widget(child) -}}
            {%- endfor -%}
        </div>
    {%- endif -%}
{%- endblock panel_row_widget %}

{% block panel_row_spacer_widget -%}
    {%- set attr = attr|merge({'class': ('panel-row-spacer' ~ attr.class|default(''))|trim}) -%}

    {{- block('panel_row_widget') -}}
{%- endblock panel_row_spacer_widget %}


{% block panel_cell_widget -%}
    {%- if rendered -%}
        {%- set attr = attr|merge({'class': ('panel-cell col-' ~ layout_col_size ~ '-' ~ layout_col_width ~ ' ' ~ attr.class|default(''))|trim}) -%}

        <div{{ block('widget_container_attributes') }}>

        {%- if not(hidden) -%}
            <div class="panel-cell-wrapper">
                {{- block_label(block) -}}
                {%- if button_help is defined -%}
                    <div class="panel-block-help">
                        {{- block_widget(button_help) -}}
                    </div>
                {%- endif -%}
                {%- set control_attr = control_attr|merge({'class': (control_attr.class|default('') ~ ' block-control')|trim}) -%}

                <div{% for attrname, attrvalue in control_attr %} {{ attrname }}="{{ attrvalue }}"{% endfor %}>
                    {% if value_formatter is not null %}
                        {%- set value = value|block_formatter(value_formatter, value_formatter_options) -%}
                    {%- endif -%}
                    {{- value|raw -}}
                    {%- for child in block -%}
                        {{- block_widget(child) -}}
                    {%- endfor -%}
                </div>
            </div>
        {%- endif -%}
        </div>
    {%- endif -%}
{%- endblock panel_cell_widget %}

{% block panel_cell_label -%}
    {%- if has_form is defined -%}
        {% set block_label_content = 'panel_cell_label_content' %}
    {%- endif -%}

    {{- block('block_label') -}}
{%- endblock panel_cell_label %}

{% block panel_cell_label_content -%}
    <label for="{{ has_form.vars.id }}">
        {{- block('block_label_content') -}}
    </label>
{%- endblock panel_cell_label_content %}


{% block panel_cell_spacer_widget -%}
    {%- set attr = attr|merge({'class': ('panel-cell-spacer ' ~ attr.class|default(''))|trim}) -%}

    {{- block('panel_cell_widget') -}}
{% endblock panel_cell_spacer_widget %}


{% block panel_list_widget -%}
    {%- require_style    '@bower/bootstrap/less/bootstrap.less'
                        '@bower/sonatra-theme-gluon/less/bootstrap-theme/bootstrap-theme.less' -%}

    {{- block('panel_widget') -}}
{%- endblock panel_list_widget %}
